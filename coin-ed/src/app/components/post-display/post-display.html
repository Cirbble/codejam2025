@if (post) {
  <div class="post-container">
    <div class="post-header">
      <div class="post-meta">
        <span class="platform-badge">{{ post.platform }}</span>
        <span class="source">{{ post.source }}</span>
        <span class="post-age">{{ post.post_age }}</span>
      </div>
      <a [href]="post.link" target="_blank" class="view-original">
        View Original
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M12 8.66667V12.6667C12 13.0203 11.8595 13.3594 11.6095 13.6095C11.3594 13.8595 11.0203 14 10.6667 14H3.33333C2.97971 14 2.64057 13.8595 2.39052 13.6095C2.14048 13.3594 2 13.0203 2 12.6667V5.33333C2 4.97971 2.14048 4.64057 2.39052 4.39052C2.64057 4.14048 2.97971 4 3.33333 4H7.33333M10 2H14M14 2V6M14 2L6.66667 9.33333" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
    </div>

    <div class="post-content">
      <h3 class="post-title">{{ post.title }}</h3>
      @if (post.content) {
        <p class="post-text">{{ post.content }}</p>
      }
      <div class="post-stats">
        <span class="stat">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <path d="M8 2L9.5 6H14L10.5 9L12 13L8 10L4 13L5.5 9L2 6H6.5L8 2Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
          </svg>
          {{ post.upvotes_likes }} upvotes
        </span>
        <span class="stat">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <path d="M14 10C14 10.3536 13.8595 10.6928 13.6095 10.9428C13.3594 11.1929 13.0203 11.3333 12.6667 11.3333H4.66667L2 14V3.33333C2 2.97971 2.14048 2.64057 2.39052 2.39052C2.64057 2.14048 2.97971 2 3.33333 2H12.6667C13.0203 2 13.3594 2.14048 13.6095 2.39052C13.8595 2.64057 14 2.97971 14 3.33333V10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          {{ post.comment_count }} comments
        </span>
        <span class="author">by {{ post.author }}</span>
      </div>
    </div>

    <div class="comments-section">
      <h4 class="comments-header">Comments ({{ post.comments?.length || 0 }})</h4>
      @if (post.comments && post.comments.length > 0) {
        <div class="comments-list">
          @for (comment of getVisibleComments(); track $index) {
            <div class="comment-item">
              <div class="comment-indicator"></div>
              <p class="comment-text">{{ comment }}</p>
            </div>
          }
        </div>
        @if (hasMoreComments()) {
          <button class="load-more-btn" (click)="loadMoreComments()">
            Load More Comments ({{ getRemainingCommentsCount() }} remaining)
          </button>
        }
      } @else {
        <p class="no-comments">No comments yet.</p>
      }
    </div>
  </div>
} @else {
  <div class="no-post">
    <p>No recent posts available for this coin.</p>
  </div>
}
