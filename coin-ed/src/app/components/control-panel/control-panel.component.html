<div class="control-panel">
  <div class="controls">
    <!-- Web Scraper Toggle -->
    <div class="control-item">
      <label class="toggle-label">
        <span class="control-name">Web Scraper</span>
        <label class="toggle-switch">
          <input
            type="checkbox"
            [checked]="dataService.agentControls().scraperEnabled"
            (change)="onScraperToggle()"
          />
          <span class="slider"></span>
        </label>
      </label>
      <span class="status" [class.active]="dataService.agentControls().scraperEnabled">
        {{ dataService.agentControls().scraperEnabled ? 'Active' : 'Inactive' }}
      </span>
    </div>

    <!-- AI Buyer Agent Toggle (Locked unless scraper is on) -->
    <div class="control-item" [class.locked]="!dataService.agentControls().scraperEnabled">
      <label class="toggle-label" [class.disabled]="!dataService.agentControls().scraperEnabled">
        <span class="control-name">
          AI Buyer
          @if (!dataService.agentControls().scraperEnabled) {
            <span class="lock-icon">LOCKED</span>
          }
        </span>
        <label class="toggle-switch">
          <input
            type="checkbox"
            [checked]="dataService.agentControls().buyerEnabled"
            [disabled]="!dataService.agentControls().scraperEnabled"
            (click)="onBuyerToggle($event)"
          />
          <span class="slider"></span>
        </label>
      </label>
      <span class="status" [class.active]="dataService.agentControls().buyerEnabled">
        {{ dataService.agentControls().buyerEnabled ? 'Active' : 'Inactive' }}
      </span>
    </div>

    <!-- AI Seller Agent Toggle (Locked unless scraper is on) -->
    <div class="control-item" [class.locked]="!dataService.agentControls().scraperEnabled">
      <label class="toggle-label" [class.disabled]="!dataService.agentControls().scraperEnabled">
        <span class="control-name">
          AI Seller
          @if (!dataService.agentControls().scraperEnabled) {
            <span class="lock-icon">LOCKED</span>
          }
        </span>
        <label class="toggle-switch">
          <input
            type="checkbox"
            [checked]="dataService.agentControls().sellerEnabled"
            [disabled]="!dataService.agentControls().scraperEnabled"
            (click)="onSellerToggle($event)"
          />
          <span class="slider"></span>
        </label>
      </label>
      <span class="status" [class.active]="dataService.agentControls().sellerEnabled">
        {{ dataService.agentControls().sellerEnabled ? 'Active' : 'Inactive' }}
      </span>
    </div>
  </div>
</div>

<!-- Confirmation Modals -->
<app-confirmation-modal
  [isVisible]="showBuyerConfirmation"
  [message]="'This will authorize the agent to automatically buy. Continue?'"
  (confirm)="onBuyerConfirm()"
  (cancel)="onBuyerCancel()"
></app-confirmation-modal>

<app-confirmation-modal
  [isVisible]="showSellerConfirmation"
  [message]="'This will authorize the agent to automatically sell. Continue?'"
  (confirm)="onSellerConfirm()"
  (cancel)="onSellerCancel()"
></app-confirmation-modal>

